<!DOCTYPE html>
<html>
  <body>
    <h1>Get hands on with JavaScript's Fetch API</h1>
    <p>
      Write your requests in the script and watch the console and network logs.
    </p>

    <script>
      // GET retrieve all to-do's
      fetch("https://jsonplaceholder.typicode.com/todos")
        .then((response) => response.json())
        .then((data) => console.log(data));

      // will return all resources

      // GET retrieves the to-do with specific URI (in this case id = 5)
      fetch("https://jsonplaceholder.typicode.com/todos/5")
        .then((response) => response.json())
        .then((data) => console.log(data));

      /* will return this specific resource:
        {
            "userId": 1,
            "id": 5,
            "title": "laboriosam mollitia et enim quasi adipisci quia provident illum",
            "completed": false
        }
        */
      // const specificIDs = () => {
      //   apiJson.then((data) =>
      //     console.log(data.find((specificID) => specificID.id === 5))
      //   );
      // };
      // specificIDs();
      // POST adds a random id to the object sent

      fetch("https://jsonplaceholder.typicode.com/todos/", {
        method: "POST",
        body: JSON.stringify({
          userId: 1,
          title: "clean room",
          completed: false,
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log(data);
        });
      // const randomObj = () => {
      //   apiJson.then((data) => {
      //     let a = { userId: 1, title: "clean room", completed: false, id: 201 };
      //     data.push(a);
      //     console.log(data[data.length - 1]);
      //   });
      // };
      // randomObj();
      /* will return
        {
            "userId": 1,
            "title": "clean room",
            "completed": false,
            "id": 201
        }
        */
      // const changeTaskName = () => {
      //   apiJson.then((data) => {
      //     let tasks = data.find((task) => task.id === 5);
      //     tasks.title = "hello task";
      //     console.log(tasks);
      //   });
      // };

      //changeTaskName();
      // PUT to the resource with id = 5 to change the name of task
      fetch("https://jsonplaceholder.typicode.com/todos/5", {
        method: "PUT",
        body: JSON.stringify({
          userId: 1,
          id: 5,
          title: "hello task",
          completed: false,
        }),
        headers: { "Content-type": "application/json; charset=UTF-8" },
      })
        .then((response) => response.json())
        .then((data) => console.log(data));

      /* will return
        {
            "userId": 1,
            "id": 5,
            "title": "hello task",
            "completed": false
        }
        */

      // PATCH to the resource id = 1
      // update that task is completed
      fetch("https://jsonplaceholder.typicode.com/todos/1", {
        method: "PATCH",
        body: JSON.stringify({
          title: "Task is completed",
        }),
        headers: { "Content-type": "application/json; charset=UTF-8" },
      })
        .then((response) => response.json())
        .then((data) => console.log(data));

      /* will return
        {
            "userId": 1,
            "id": 1,
            "title": "delectus aut autem",
            "completed": true
        }
        */
      // const idCompleteOne = () => {
      //   apiJson.then((data) => {
      //     let taskOne = data.find((task) => task.id === 1);
      //     taskOne.completed = true;
      //     console.log(taskOne);
      //   });
      // };

      // idCompleteOne();

      // DELETE task with id = 1

      fetch("https://jsonplaceholder.typicode.com/todos/1", {
        method: "DELETE",
      })
        .then((response) => response.json())
        .then((data) => console.log(data));
      // const deleteIdOne = () => {
      //   apiJson.then((data) => {
      //     let taskOne = data.find((task) => task.id === 1);
      //     taskOne = {};
      //     console.log(taskOne);
      //   });
      // };
      // deleteIdOne();
      // empty response: {}
      // another approach
      // const deleteIDone = () => {
      //   apiJson.then((data) => {
      //     taskone = data.find((task) => task.id === 1);
      //     delete taskone.userId;
      //     delete taskone.id;
      //     delete taskone.title;
      //     delete taskone.completed;
      //     console.log(taskone);
      //   });
      // };
      // deleteIDone();
    </script>
  </body>
</html>
